<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
div {
	width: height: auto;
	padding: 10px;
	margin: 10px;
	background: lightpink;
}
</style>
<script>
	function proc0() {

		input = prompt("주민번호 입력");
		syear = input.substr(0, 2);
		smonth = input.substr(2, 2);
		sday = input.substr(4, 2);

		sgend = input.substr(7, 1);

		if (sgend == "2" || sgend == "4") {
			gend = "여자";
		} else {
			gend = "남자";
		}
		if (sgend == "1" || sgend == "2") {
			year = 1900;
		} else {
			year = 2000;
		}

		today = new Date();
		fyear = today.getFullYear();
		syear = year + parseInt(syear);

		age = fyear - syear;
		res = "주민번호 : " + input + "<br>";
		res += "생일 : " + syear + "년" + smonth + "월 " + sday + "일 <br>";
		res += "성별 : " + gend + "나이 : " + age + "<br>";

		document.getElementById("result0").innerHTML = res;
	}

	function proc1() {

		input = prompt("주민등록번호를 입력하세요(950221-1711111)");

	}

	function proc2() {

		input = prompt("주민등록번호를 입력하세요.", "- 포함 입력");
		// 950221-1721111
		temp = input.split("-");
		temp = temp[0] + temp[1];
		str = "234567892345";
		sum = 0;

		for (i = 0; i < temp.length - 1; i++) {
			/* sum += temp[i] * parseInt(str.charAt(i));	//parseInt는 더하기 할때만. */
			//sum += temp[i] * str.substr(i,1);
			sum += temp[i] * (i % 8 + 2);	// 이렇게 하게되면 str을 만들 필요가 없음.
		}

		res = 11 - (sum % 11);	// 0 ~ 9 , 10, 11
		/* if (res == 10) {
			res = 0;
		} else if (res == 11) {
			res = 1;
		} */
		res = res % 10;
		
		str = "입력 번호 : " + input + "<br>";
		
		if(res == temp.charAt(12)) {
			//alert("진짜");
			str += "올바른 번호입니다.";
		} else {
			str += "잘못된 번호입니다.";
			//alert("가짜");
		}
		
		document.getElementById("result2").innerHTML = str;

	}
</script>
</head>
<body>

	<h2>주민등록번호로 생년월일, 성별 추출 (쌤 ver)</h2>
	<button type="button" onclick="proc0()">주민등록번호 생년월일</button>
	<div id="result0"></div>

	<h2>주민등록번호로 생년월일, 성별 추출</h2>
	<button type="button" onclick="proc1()">주민등록번호 생년월일</button>
	<div id="result1"></div>

	<h2>주민등록번호로 입력받아 주민등록번호의 유효성을 검사</h2>
	<button type="button" onclick="proc2()">주민등록번호 유효성</button>
	<div id="result2"></div>
</body>
</html>